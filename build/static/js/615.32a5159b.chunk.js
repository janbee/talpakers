"use strict";(self.webpackChunkplay_ab_web=self.webpackChunkplay_ab_web||[]).push([[615],{1615:(e,s,a)=>{a.a(e,(async(e,n)=>{try{a.r(s),a.d(s,{UserDetailsComponent:()=>I});var t=a(2791),i=(a(5630),a(1254)),l=a(1902),r=a(6249),o=a(899),d=a(2836),c=a(9277),u=a(3626),h=a(4863),v=a(6303),g=a(7900),m=a(1952),p=a(763),x=a(2426),j=a.n(x),w=a(7689),b=a(3656),D=a(1418),f=a.n(D),S=a(7335),T=a(3338),y=a(1554),A=a(184),O=e([g,T]);[g,T]=O.then?(await O)():O;class Z{constructor(){this.loading=!0,this.list=[],this.yearTotalWinnings=0,this.yearTotalWithdrawals=0,this.userDetails=void 0,this.settingsOpen=!1}}const I=(0,t.memo)((()=>{var e,s,a,n,x,D,O,I,N,k;const{pathname:C}=(0,w.TH)(),W=null===(e=C.split("/").pop())||void 0===e?void 0:e.replace("@",""),[B,_]=(0,t.useState)(new Z);(0,t.useEffect)((()=>{_((e=>({...e,loading:!0})));const e=null===W||void 0===W?void 0:W.split(",");(0,S.D)([g.b.getBetSummary({email:{$in:e}}),g.b.getBonuses({email:{$in:e}}),g.b.getWithdrawals({email:{$in:e}}),g.b.getUser({email:{$in:e}})]).subscribe((s=>{let[a,n,t,i]=s;const l=null===n||void 0===n?void 0:n.filter((e=>"Approved"===e.TransactionStatus&&"Bonus"===e.TransactionType&&["IMMEDIATE BONUS","Bonus"].includes(e.PaymentMethodInfo)&&e.Amount>=10)),r=null===t||void 0===t?void 0:t.filter((e=>["Approved","Pending","Sending to Processor","In Process"].includes(e.TransactionStatus))),o=Array.from(Array(j()().isoWeeksInYear()).keys()).map((s=>{var n;const t=j()().format("YYYY"),i=j()(t).add(s,"weeks"),o=j()(i).format("MMM"),d=j()(i).format("M"),c=j()(i).startOf("week").add(1,"day").toISOString(),u=j()(i).endOf("week").toISOString(),h=new Date(c),v=new Date(u);h.setUTCHours(0,0,0,0),v.setUTCHours(23,59,59,999);const g=null===a||void 0===a?void 0:a.filter((e=>e.startDate===h.toISOString()&&e.endDate===v.toISOString()&&e.year===parseInt(t,10))),m=null===e||void 0===e?void 0:e.map((e=>null===l||void 0===l?void 0:l.reverse().find((s=>{const a=j()(s.TransactionDateTime).subtract(7,"days");return a.isAfter(h)&&a.isBefore(v)&&s.email===e})))).filter(Boolean),x=null===r||void 0===r?void 0:r.find((e=>{const s=new Date(e.TransactionDateTime.split("T")[0]);s.setUTCHours(0,0,0,0);const a=j()(s.toISOString());return a.isSameOrAfter(h)&&a.isSameOrBefore(v)}));let w=0;const b=(0,p.sumBy)(g,(e=>(null===e||void 0===e?void 0:e.betSummary.bonus)||0)),D=(0,p.sumBy)(g,(e=>(null===e||void 0===e?void 0:e.betSummary.totalStaked)||0)),f=(0,p.sumBy)(g,(e=>(null===e||void 0===e?void 0:e.betSummary.totalEarnings)||0));let S=(0,p.sumBy)(g,(e=>(null===e||void 0===e?void 0:e.betSummary.winnings)||0)),T=(0,p.sumBy)(m,(e=>(null===e||void 0===e?void 0:e.Amount)||0));return(null===m||void 0===m?void 0:m.length)!==(null===e||void 0===e?void 0:e.length)?T=b:S=0,null!==m&&void 0!==m&&m.length&&null!==g&&void 0!==g&&g.length&&(w=T+(0,p.sumBy)(g,(e=>(null===e||void 0===e?void 0:e.betSummary.totalEarnings)||0))),{_id:"".concat(o,"-").concat(s),mon:d+"-"+o,year:t,startDate:h.toISOString(),endDate:v.toISOString(),bonus:T||b||0,bonusDateTime:null===m||void 0===m||null===(n=m[0])||void 0===n?void 0:n.TransactionDateTime,totalStaked:D,totalEarnings:f,winnings:w,approxWinnings:S,loading:!1,fetch:0,title:o,withdrawal:x}})),d=(0,p.groupBy)(o,"mon"),c=Object.keys(d).map((e=>({title:e.split("-")[1],data:d[e]}))),u=(0,p.sumBy)(c,(e=>(0,p.sumBy)(e.data,"winnings"))),h=(0,p.sumBy)(c,(e=>(0,p.sumBy)(e.data,"withdrawal.Amount")));_((e=>({...e,loading:!1,yearTotalWinnings:u,yearTotalWithdrawals:h,list:c,userDetails:i})))}))}),[W]);const M=(0,t.useCallback)((()=>{_((e=>({...e,settingsOpen:!B.settingsOpen})))}),[B.settingsOpen]),P=((null===W||void 0===W?void 0:W.split(","))||[]).length>1;return(0,A.jsx)("div",{className:f()({"user-details-wrap":!0,"multi-users":P}),children:(0,A.jsxs)(i.Z,{children:[(0,A.jsx)(l.Z,{animation:"overlay",onHide:M,visible:B.settingsOpen,width:"wide",children:(0,A.jsx)(T.L,{config:{email:W},userDetails:null===(s=B.userDetails)||void 0===s?void 0:s[0]})}),(0,A.jsx)(r.Z,{children:(0,A.jsxs)(o.Z,{inverted:!0,children:[(0,A.jsxs)("div",{className:"ttl",children:[P?(0,A.jsx)("span",{children:"Multi Users View"}):(0,A.jsxs)("div",{className:"icon-wrap",children:[(0,A.jsx)(d.Z,{onClick:M,className:"pointer",name:"bars",size:"small"}),(0,A.jsx)("span",{children:W})]}),!P&&(0,A.jsx)("div",{className:"row-wrap between",children:(0,A.jsx)(c.Z,{on:"hover",basic:!0,trigger:(0,A.jsx)(d.Z,{name:"info circle",size:"small",className:"pointer"}),position:"bottom right",mouseLeaveDelay:6e4,children:(0,A.jsxs)(u.Z,{vertical:!0,children:[(0,A.jsx)(u.Z.Item,{header:!0,children:(0,A.jsxs)(h.Z,{as:"h3",children:["Year ",j()().format("YYYY")," Details"]})}),(0,A.jsxs)(u.Z.Item,{children:[(0,A.jsx)(h.Z,{as:"h4",children:"Current Balance"}),(0,A.jsx)("p",{children:(0,A.jsx)(v.Z,{color:"green",children:(0,b.WI)((null===(a=B.userDetails)||void 0===a||null===(n=a[0])||void 0===n||null===(x=n.data)||void 0===x||null===(D=x.userSession)||void 0===D?void 0:D.cash)||0)})})]}),(0,A.jsxs)(u.Z.Item,{children:[(0,A.jsx)(h.Z,{as:"h4",children:"Available Cashout"}),(0,A.jsx)("p",{children:(0,A.jsx)(v.Z,{color:"orange",children:(0,b.WI)((null===(O=B.userDetails)||void 0===O||null===(I=O[0])||void 0===I||null===(N=I.data)||void 0===N||null===(k=N.userSession)||void 0===k?void 0:k.cashout)||0)})})]}),(0,A.jsxs)(u.Z.Item,{children:[(0,A.jsx)(h.Z,{as:"h4",children:"Total Earnings this year"}),(0,A.jsx)("p",{children:(0,A.jsx)(v.Z,{color:"purple",children:(0,b.WI)(B.yearTotalWinnings)})})]}),(0,A.jsxs)(u.Z.Item,{children:[(0,A.jsx)(h.Z,{as:"h4",children:"Total Cashout this year"}),(0,A.jsx)("p",{children:(0,A.jsxs)(v.Z,{color:"red",children:[" ",(0,b.WI)(Math.abs(B.yearTotalWithdrawals||0))]})})]})]})})})]}),(0,A.jsx)("hr",{}),(0,A.jsx)("div",{className:"user-details-content-wrap",children:B.list.map((e=>{const s=(0,p.sumBy)(e.data,"winnings");return(0,A.jsxs)("div",{className:"mon-wrap",children:[(0,A.jsxs)("div",{className:"ttl-wrap",children:[(0,A.jsx)(h.Z,{as:"h3",inverted:!0,children:e.title}),(0,A.jsx)(h.Z,{className:f()({winnings:s>0,losses:s<0}),as:"h4",inverted:!0,children:(0,b.WI)(s)})]}),(0,A.jsx)("hr",{}),(0,A.jsx)("div",{className:"week-wrap",children:e.data.map((e=>(0,A.jsxs)("div",{className:"week",children:[!!e.withdrawal&&!P&&(0,A.jsx)(A.Fragment,{children:[{Pending:"Pending"===e.withdrawal.TransactionStatus,Approved:"Approved"===e.withdrawal.TransactionStatus,Processing:["In Process","Sending to Processor"].includes(e.withdrawal.TransactionStatus)}].map(((s,a)=>{var n,t,i;return(0,A.jsxs)(c.Z,{on:"click",position:"top center",trigger:(0,A.jsx)("div",{className:f()({"has-withdrawal":!0,yellow:s.Pending,green:s.Approved,blue:s.Processing})}),flowing:!0,children:[(0,A.jsxs)(c.Z.Header,{children:["Withdrawal (",(0,A.jsx)("span",{className:f()({"yellow-light":s.Pending,"green-light":s.Approved,"blue-light":s.Processing}),children:null===(n=e.withdrawal)||void 0===n?void 0:n.TransactionStatus}),")"]}),(0,A.jsx)(c.Z.Content,{children:"".concat(null===(t=e.withdrawal)||void 0===t?void 0:t.PaymentMethodInfo," ").concat((0,b.WI)((null===(i=e.withdrawal)||void 0===i?void 0:i.Amount)||0))})]},a)}))}),(0,A.jsx)("div",{className:"week-date",children:(0,A.jsxs)("span",{children:[j()(e.startDate).utc().format("ddd DD")," -"," ",j()(e.endDate).utc().format("ddd DD")]})}),(0,A.jsxs)("div",{className:"week-content",children:[(0,A.jsxs)("div",{className:"row-wrap",children:[(0,A.jsx)("span",{children:"Staked"}),(0,A.jsx)("span",{children:(0,b.WI)(e.totalStaked)})]}),(0,A.jsxs)("div",{className:"row-wrap",children:[(0,A.jsx)("span",{children:"Earnings"}),(0,A.jsx)("span",{children:(0,b.WI)(e.totalEarnings)})]}),(0,A.jsxs)("div",{className:"row-wrap",children:[(0,A.jsx)("span",{children:"Bonus"}),(0,A.jsx)("span",{children:(0,b.WI)(e.bonus)})]}),e.approxWinnings>0&&(0,A.jsx)(y.A,{earnings:e})||(0,A.jsx)(y.T,{earnings:e})]})]},e._id)))})]},e.title)}))}),(0,A.jsx)(m.o,{loading:B.loading})]})})]})})}));n()}catch(Z){n(Z)}}))},1554:(e,s,a)=>{a.d(s,{A:()=>c,T:()=>u});var n=a(3656),t=(a(2791),a(9277)),i=a(1418),l=a.n(i),r=a(2426),o=a.n(r),d=a(184);const c=e=>{let{earnings:s}=e;return(0,d.jsxs)("div",{className:"row-wrap",children:[(0,d.jsx)("span",{children:"Winnings"}),(0,d.jsx)(t.Z,{content:"Approximate Earnings.",position:"top center",trigger:(0,d.jsx)("span",{className:l()({approx:!0}),children:(0,n.WI)(s.approxWinnings)})})]})},u=e=>{let{earnings:s}=e;return(0,d.jsxs)("div",{className:"row-wrap",children:[(0,d.jsx)("span",{children:"Winnings"}),(0,d.jsx)(t.Z,{disabled:!s.bonusDateTime,content:o()(s.bonusDateTime).format("ddd hh:mm A"),position:"top center",trigger:(0,d.jsx)("span",{className:l()({winnings:s.winnings>0,losses:s.winnings<0}),children:(0,n.WI)(s.winnings)})})]})}},3338:(e,s,a)=>{a.a(e,(async(e,n)=>{try{a.d(s,{L:()=>D});var t=a(2791),i=a(1418),l=a.n(i),r=a(899),o=a(834),d=a(4834),c=a(5345),u=a(2836),h=a(7900),v=a(5027),g=a(763),m=a(2426),p=a.n(m),x=a(1952),j=a(184),w=e([h]);h=(w.then?(await w)():w)[0];class b{constructor(e){var s,a;this.config={isOpen:!1,email:"",password:""},this.loading=!1,this.userDetails={data:{userSession:{TWO_FACTOR_AUTH:""}}},this.userDetails.data.userSession.TWO_FACTOR_AUTH=(null===(s=e.userDetails)||void 0===s||null===(a=s.data.userSession)||void 0===a?void 0:a.TWO_FACTOR_AUTH)||""}}const D=(0,t.memo)((e=>{var s,a,n,i,m,w,D,f,S,T,y,A,O,Z;const[I,N]=(0,t.useState)(new b(e));console.log("gaga---------state---------------------statestatestate-------",I),(0,t.useEffect)((()=>{N((s=>{var a,n;return s.userDetails.data.userSession.TWO_FACTOR_AUTH=(null===(a=e.userDetails)||void 0===a||null===(n=a.data.userSession)||void 0===n?void 0:n.TWO_FACTOR_AUTH)||"",s.config.email=e.config.email,{...s}}))}),[e]);const k=(0,t.useCallback)((()=>{console.log("gaga----------------------state.config.email---------------",I.config),N((e=>({...e,loading:!0}))),h.b.$RealmDB.login(I.config.email,I.config.password).pipe((0,v.z)((()=>(console.log("gaga------------------------------------to update",JSON.stringify({...I.userDetails,_id:I.config.email},null,2)),h.b.upsertUserData({...I.userDetails,_id:I.config.email}))))).subscribe((()=>{N((e=>({...e,loading:!1})))}))}),[I.config]),C=(0,t.useCallback)((e=>{console.log("gaga-------------------------------------"),N((s=>{const a={},n=e.target.getAttribute("data-value");(0,g.set)(a,n,e.target.value);const t=(0,g.merge)(s,a);return console.log("gaga-------------------------------------",t),{...s,...t}}))}),[]),W=(0,t.useCallback)(((e,s)=>{e.preventDefault();const a=s["data-value"];Object.keys(a).forEach((e=>{const s=(0,g.get)(I.userDetails,e),n=a[e];"updatedAt"===e&&s?(delete I.userDetails.updatedAt,Object.assign(I.userDetails,(0,g.omit)(I.userDetails,e))):s!==n?(0,g.set)(I.userDetails,e,a[e]):Object.assign(I.userDetails,(0,g.omit)(I.userDetails,e))})),console.log("gaga-----------------------------state.userDetails--------",p()(I.userDetails.updatedAt).fromNow(),I.userDetails.updatedAt),N((e=>({...e,userDetails:I.userDetails})))}),[I.userDetails]),B=(0,t.useCallback)((e=>{e.preventDefault(),e.target.blur()}),[]);return(0,j.jsxs)("div",{className:l()({"settings-wrap":!0,open:I.config.isOpen}),children:[(0,j.jsxs)(r.Z,{inverted:!0,children:[(0,j.jsx)("span",{className:"ttl",children:"Settings"}),(0,j.jsx)("hr",{}),(0,j.jsxs)("div",{className:"content",children:[(0,j.jsxs)("div",{className:"content-item",children:[(0,j.jsx)("span",{children:"For Account"}),(0,j.jsx)("span",{children:I.config.email})]}),(0,j.jsxs)("div",{className:"content-item",children:[(0,j.jsx)("span",{children:"Change Time"}),(0,j.jsx)(o.Z,{inverted:!0,color:"green",size:"small",circular:!0,active:!!I.userDetails.updatedAt,"data-value":{updatedAt:p()().subtract(1,"hour").toDate()},onClick:W,onMouseOut:B,children:"Yes"})]}),(0,j.jsxs)("div",{className:"content-item",children:[(0,j.jsx)("span",{children:"Set Bet"}),(0,j.jsxs)("div",{className:"btn-wrap",children:[(0,j.jsx)(o.Z,{tabIndex:-1,inverted:!0,color:"orange",size:"small",circular:!0,"data-value":{"data.settings.bet":"5"},active:"5"===(null===(s=I.userDetails.data)||void 0===s||null===(a=s.settings)||void 0===a?void 0:a.bet),onClick:W,onMouseOut:B,children:"5"}),(0,j.jsx)(o.Z,{tabIndex:-1,inverted:!0,color:"yellow",size:"small",circular:!0,"data-value":{"data.settings.bet":"15"},active:"15"===(null===(n=I.userDetails.data)||void 0===n||null===(i=n.settings)||void 0===i?void 0:i.bet),onClick:W,onMouseOut:B,children:"15"}),(0,j.jsx)(o.Z,{tabIndex:-1,inverted:!0,color:"green",size:"small",circular:!0,active:"25"===(null===(m=I.userDetails.data)||void 0===m||null===(w=m.settings)||void 0===w?void 0:w.bet),"data-value":{"data.settings.bet":"25"},onClick:W,onMouseOut:B,children:"25"})]})]}),(0,j.jsxs)("div",{className:"content-item",children:[(0,j.jsx)("span",{children:"Set Done"}),(0,j.jsxs)("div",{className:"btn-wrap",children:[(0,j.jsx)(o.Z,{tabIndex:-1,inverted:!0,color:"red",size:"small",circular:!0,"data-value":{"data.weekStatus.done":!1},active:!1===(null===(D=I.userDetails.data)||void 0===D||null===(f=D.weekStatus)||void 0===f?void 0:f.done),onClick:W,onMouseOut:B,children:"false"}),(0,j.jsx)(o.Z,{tabIndex:-1,inverted:!0,color:"green",size:"small",circular:!0,"data-value":{"data.weekStatus.done":!0},active:!0===(null===(S=I.userDetails.data)||void 0===S||null===(T=S.weekStatus)||void 0===T?void 0:T.done),onClick:W,onMouseOut:B,children:"true"})]})]}),(0,j.jsxs)("div",{className:"content-item",children:[(0,j.jsx)("span",{children:"Set Auto Login"}),(0,j.jsxs)("div",{className:"btn-wrap",children:[(0,j.jsx)(o.Z,{tabIndex:-1,inverted:!0,color:"red",size:"small",circular:!0,"data-value":{"data.settings.electronAutoLogin":!1},active:!1===(null===(y=I.userDetails.data)||void 0===y||null===(A=y.settings)||void 0===A?void 0:A.electronAutoLogin),onClick:W,onMouseOut:B,children:"false"}),(0,j.jsx)(o.Z,{tabIndex:-1,inverted:!0,color:"green",size:"small",circular:!0,"data-value":{"data.settings.electronAutoLogin":!0},active:!0===(null===(O=I.userDetails.data)||void 0===O||null===(Z=O.settings)||void 0===Z?void 0:Z.electronAutoLogin),onClick:W,onMouseOut:B,children:"true"})]})]}),(0,j.jsxs)("div",{className:"content-item",children:[(0,j.jsx)("span",{children:"Set Two Factor Auth"}),(0,j.jsx)("div",{className:"btn-wrap",children:(0,j.jsx)(d.Z,{placeholder:"Two factor auth",children:(0,j.jsx)("input",{"data-value":"userDetails.data.userSession.TWO_FACTOR_AUTH",value:I.userDetails.data.userSession.TWO_FACTOR_AUTH,onInput:C})})})]})]}),(0,j.jsx)("hr",{}),(0,j.jsxs)(c.Z,{onSubmit:k,className:"footer",children:[(0,j.jsxs)(d.Z,{iconPosition:"left",placeholder:"Password",children:[(0,j.jsx)(u.Z,{name:"lock"}),(0,j.jsx)("input",{placeholder:"Password","data-value":"config.password",value:I.config.password,onInput:C})]}),(0,j.jsx)(o.Z,{type:"submit",children:"Update"})]})]}),(0,j.jsx)(x.o,{loading:I.loading})]})}));n()}catch(b){n(b)}}))},1952:(e,s,a)=>{a.d(s,{o:()=>o});var n=a(2791),t=a(1487),i=a(2417),l=a(184);class r{constructor(e){this.loading=!1,this.content="",this.loading=e.loading,this.content=e.content}}const o=e=>{const[s,a]=(0,n.useState)(new r(e));return(0,n.useEffect)((()=>{a((s=>({...s,loading:e.loading})))}),[e.loading]),(0,l.jsx)(t.Z,{style:{position:"absolute",top:0,left:0,right:0,bottom:0},...s.loading?{active:!0}:{},children:(0,l.jsx)(i.Z,{})})}},5630:()=>{}}]);
//# sourceMappingURL=615.32a5159b.chunk.js.map