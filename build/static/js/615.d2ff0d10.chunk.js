"use strict";(self.webpackChunkplay_ab_web=self.webpackChunkplay_ab_web||[]).push([[615],{1615:function(n,i,e){e.a(n,(async function(n,t){try{e.r(i),e.d(i,{UserDetailsComponent:function(){return D}});var s=e(1413),a=e(9439),r=e(3144),l=e(5671),o=e(2791),d=(e(5630),e(899)),c=e(4569),u=e(2836),h=e(2111),m=e(4863),v=e(6303),p=e(7900),g=e(1952),w=e(763),x=e(2426),f=e.n(x),j=e(7689),y=e(3656),Z=e(1418),S=e.n(Z),I=e(7335),b=e(184),T=n([p]);p=(T.then?(await T)():T)[0];var W=(0,r.Z)((function n(){(0,l.Z)(this,n),this.loading=!0,this.list=[],this.yearTotalWinnings=0,this.yearTotalWithdrawals=0,this.userDetails=void 0})),D=(0,o.memo)((function(){var n,i,e,t,r,l,x,Z=null===(n=(0,j.TH)().pathname.split("/").pop())||void 0===n?void 0:n.replace("@",""),T=(0,o.useState)(new W),D=(0,a.Z)(T,2),B=D[0],N=D[1];(0,o.useEffect)((function(){N((function(n){return(0,s.Z)((0,s.Z)({},n),{},{loading:!0})}));var n=null===Z||void 0===Z?void 0:Z.split(",");(0,I.D)([p.b.getBetSummary({email:{$in:n}}),p.b.getBonuses({email:{$in:n}}),p.b.getWithdrawals({email:{$in:n}}),p.b.getUser({email:{$in:n}})]).subscribe((function(i){var e=(0,a.Z)(i,4),t=e[0],r=e[1],l=e[2],o=e[3],d=null===r||void 0===r?void 0:r.filter((function(n){return"Approved"===n.TransactionStatus&&"Bonus"===n.TransactionType&&["IMMEDIATE BONUS","Bonus"].includes(n.PaymentMethodInfo)&&n.Amount>=10})),c=null===l||void 0===l?void 0:l.filter((function(n){return["Approved","Pending","Sending to Processor","In Process"].includes(n.TransactionStatus)})),u=Array.from(Array(f()().isoWeeksInYear()).keys()).map((function(i){var e=f()().format("YYYY"),s=f()(e).add(i,"weeks"),a=f()(s).format("MMM"),r=f()(s).format("M"),l=f()(s).startOf("week").add(1,"day").toISOString(),o=f()(s).endOf("week").toISOString(),u=new Date(l),h=new Date(o);u.setUTCHours(0,0,0,0),h.setUTCHours(23,59,59,999);var m=null===t||void 0===t?void 0:t.filter((function(n){return n.startDate===u.toISOString()&&n.endDate===h.toISOString()&&n.year===parseInt(e,10)})),v=null===n||void 0===n?void 0:n.map((function(n){return null===d||void 0===d?void 0:d.reverse().find((function(i){var e=f()(i.TransactionDateTime).subtract(7,"days");return e.isAfter(u)&&e.isBefore(h)&&i.email===n}))})).filter(Boolean),p=null===c||void 0===c?void 0:c.find((function(n){var i=new Date(n.TransactionDateTime.split("T")[0]);i.setUTCHours(0,0,0,0);var e=f()(i.toISOString());return e.isSameOrAfter(u)&&e.isSameOrBefore(h)})),g=0,x=(0,w.sumBy)(m,(function(n){return(null===n||void 0===n?void 0:n.betSummary.bonus)||0})),j=(0,w.sumBy)(m,(function(n){return(null===n||void 0===n?void 0:n.betSummary.totalStaked)||0})),y=(0,w.sumBy)(m,(function(n){return(null===n||void 0===n?void 0:n.betSummary.totalEarnings)||0})),Z=(0,w.sumBy)(m,(function(n){return(null===n||void 0===n?void 0:n.betSummary.winnings)||0})),S=(0,w.sumBy)(v,(function(n){return(null===n||void 0===n?void 0:n.Amount)||0}));return(null===v||void 0===v?void 0:v.length)!==(null===n||void 0===n?void 0:n.length)?S=x:Z=0,null!==v&&void 0!==v&&v.length&&null!==m&&void 0!==m&&m.length&&(g=S+(0,w.sumBy)(m,(function(n){return(null===n||void 0===n?void 0:n.betSummary.totalEarnings)||0}))),{_id:"".concat(a,"-").concat(i),mon:r+"-"+a,year:e,startDate:u.toISOString(),endDate:h.toISOString(),bonus:S||x||0,totalStaked:j,totalEarnings:y,winnings:g,approxWinnings:Z,loading:!1,fetch:0,title:a,withdrawal:p}})),h=(0,w.groupBy)(u,"mon"),m=Object.keys(h).map((function(n){return{title:n.split("-")[1],data:h[n]}})),v=(0,w.sumBy)(m,(function(n){return(0,w.sumBy)(n.data,"winnings")})),p=(0,w.sumBy)(m,(function(n){return(0,w.sumBy)(n.data,"withdrawal.Amount")}));N((function(n){return(0,s.Z)((0,s.Z)({},n),{},{loading:!1,yearTotalWinnings:v,yearTotalWithdrawals:p,list:m,userDetails:o})}))}))}),[Z]);var k=((null===Z||void 0===Z?void 0:Z.split(","))||[]).length>1;return(0,b.jsx)("div",{className:S()({"user-details-wrap":!0,"multi-users":k}),children:(0,b.jsxs)(d.Z,{inverted:!0,children:[(0,b.jsxs)("div",{className:"ttl",children:[k?(0,b.jsx)("span",{children:"Multi Users View"}):(0,b.jsx)("span",{children:Z}),!k&&(0,b.jsx)("div",{className:"row-wrap between",children:(0,b.jsx)(c.Z,{on:"hover",basic:!0,trigger:(0,b.jsx)(u.Z,{name:"info circle"}),position:"bottom right",mouseLeaveDelay:6e4,children:(0,b.jsxs)(h.Z,{vertical:!0,children:[(0,b.jsx)(h.Z.Item,{header:!0,children:(0,b.jsxs)(m.Z,{as:"h3",children:["Year ",f()().format("YYYY")," Details"]})}),(0,b.jsxs)(h.Z.Item,{children:[(0,b.jsx)(m.Z,{as:"h4",children:"Current Balance"}),(0,b.jsx)("p",{children:(0,b.jsx)(v.Z,{color:"green",children:(0,y.WI)((null===(i=B.userDetails)||void 0===i||null===(e=i[0].data)||void 0===e||null===(t=e.userSession)||void 0===t?void 0:t.cash)||0)})})]}),(0,b.jsxs)(h.Z.Item,{children:[(0,b.jsx)(m.Z,{as:"h4",children:"Available Cashout"}),(0,b.jsx)("p",{children:(0,b.jsx)(v.Z,{color:"orange",children:(0,y.WI)((null===(r=B.userDetails)||void 0===r||null===(l=r[0].data)||void 0===l||null===(x=l.userSession)||void 0===x?void 0:x.cashout)||0)})})]}),(0,b.jsxs)(h.Z.Item,{children:[(0,b.jsx)(m.Z,{as:"h4",children:"Total Earnings this year"}),(0,b.jsx)("p",{children:(0,b.jsx)(v.Z,{color:"purple",children:(0,y.WI)(B.yearTotalWinnings)})})]}),(0,b.jsxs)(h.Z.Item,{children:[(0,b.jsx)(m.Z,{as:"h4",children:"Total Cashout this year"}),(0,b.jsx)("p",{children:(0,b.jsxs)(v.Z,{color:"red",children:[" ",(0,y.WI)(Math.abs(B.yearTotalWithdrawals||0))]})})]})]})})})]}),(0,b.jsx)("hr",{}),(0,b.jsx)("div",{className:"user-details-content-wrap",children:B.list.map((function(n){var i=(0,w.sumBy)(n.data,"winnings");return(0,b.jsxs)("div",{className:"mon-wrap",children:[(0,b.jsxs)("div",{className:"ttl-wrap",children:[(0,b.jsx)(m.Z,{as:"h3",inverted:!0,children:n.title}),(0,b.jsx)(m.Z,{className:S()({winnings:i>0,losses:i<0}),as:"h4",inverted:!0,children:(0,y.WI)(i)})]}),(0,b.jsx)("hr",{}),(0,b.jsx)("div",{className:"week-wrap",children:n.data.map((function(n){return(0,b.jsxs)("div",{className:"week",children:[!!n.withdrawal&&!k&&(0,b.jsxs)(c.Z,{on:"click",position:"top center",trigger:(0,b.jsx)("div",{className:"has-withdrawal"}),flowing:!0,children:[(0,b.jsxs)(c.Z.Header,{children:["Withdrawal (",(0,b.jsx)("span",{className:S()({"yellow-light":"Pending"===n.withdrawal.TransactionStatus,"green-light":"Approved"===n.withdrawal.TransactionStatus,"blue-light":["In Process","Sending to Processor"].includes(n.withdrawal.TransactionStatus)}),children:n.withdrawal.TransactionStatus}),")"]}),(0,b.jsx)(c.Z.Content,{children:"".concat(n.withdrawal.PaymentMethodInfo," ").concat((0,y.WI)(n.withdrawal.Amount))})]}),(0,b.jsx)("div",{className:"week-date",children:(0,b.jsxs)("span",{children:[f()(n.startDate).utc().format("ddd DD")," -"," ",f()(n.endDate).utc().format("ddd DD")]})}),(0,b.jsxs)("div",{className:"week-content",children:[(0,b.jsxs)("div",{className:"row-wrap",children:[(0,b.jsx)("span",{children:"Staked"}),(0,b.jsx)("span",{children:(0,y.WI)(n.totalStaked)})]}),(0,b.jsxs)("div",{className:"row-wrap",children:[(0,b.jsx)("span",{children:"Earnings"}),(0,b.jsx)("span",{children:(0,y.WI)(n.totalEarnings)})]}),(0,b.jsxs)("div",{className:"row-wrap",children:[(0,b.jsx)("span",{children:"Bonus"}),(0,b.jsx)("span",{children:(0,y.WI)(n.bonus)})]}),n.approxWinnings>0&&(0,b.jsxs)("div",{className:"row-wrap",children:[(0,b.jsx)("span",{children:"Winnings"}),(0,b.jsx)(c.Z,{content:"Approximate Earnings.",position:"top center",trigger:(0,b.jsx)("span",{className:S()({approx:!0}),children:(0,y.WI)(n.approxWinnings)})})]})||(0,b.jsxs)("div",{className:"row-wrap",children:[(0,b.jsx)("span",{children:"Winnings"}),(0,b.jsx)("span",{className:S()({winnings:n.winnings>0,losses:n.winnings<0}),children:(0,y.WI)(n.winnings)})]})]})]},n._id)}))})]},n.title)}))}),(0,b.jsx)(g.o,{loading:B.loading})]})})}));t()}catch(B){t(B)}}))},1952:function(n,i,e){e.d(i,{o:function(){return h}});var t=e(1413),s=e(9439),a=e(3144),r=e(5671),l=e(2791),o=e(1487),d=e(2417),c=e(184),u=(0,a.Z)((function n(i){(0,r.Z)(this,n),this.loading=!1,this.content="",this.loading=i.loading,this.content=i.content})),h=function(n){var i=(0,l.useState)(new u(n)),e=(0,s.Z)(i,2),a=e[0],r=e[1];return(0,l.useEffect)((function(){r((function(i){return(0,t.Z)((0,t.Z)({},i),{},{loading:n.loading})}))}),[n.loading]),(0,c.jsx)(o.Z,(0,t.Z)((0,t.Z)({style:{position:"absolute",top:0,left:0,right:0,bottom:0}},a.loading?{active:!0}:{}),{},{children:(0,c.jsx)(d.Z,{})}))}},5630:function(){}}]);
//# sourceMappingURL=615.d2ff0d10.chunk.js.map