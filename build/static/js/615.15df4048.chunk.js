"use strict";(self.webpackChunkplay_ab_web=self.webpackChunkplay_ab_web||[]).push([[615],{1615:function(n,a,t){t.a(n,(async function(n,s){try{t.r(a),t.d(a,{UserDetailsComponent:function(){return N}});var i=t(1413),e=t(9439),r=t(3144),o=t(5671),l=t(2791),d=(t(5630),t(899)),c=t(4863),u=t(1425),h=t(7900),m=t(1952),w=t(763),v=t(2426),g=t.n(v),f=t(7689),p=t(3656),j=t(1694),x=t.n(j),y=t(7335),b=t(184),S=n([h]);h=(S.then?(await S)():S)[0];var Z=(0,r.Z)((function n(){(0,o.Z)(this,n),this.loading=!0,this.list=[],this.yearTotalWinnings=0,this.yearTotalWithdrawals=0})),N=(0,l.memo)((function(){var n,a=null===(n=(0,f.TH)().pathname.split("/").pop())||void 0===n?void 0:n.replace("@",""),t=(0,l.useState)(new Z),s=(0,e.Z)(t,2),r=s[0],o=s[1];return(0,l.useEffect)((function(){o((function(n){return(0,i.Z)((0,i.Z)({},n),{},{loading:!0})})),(0,y.D)([h.b.getBetSummary({email:a}),h.b.getBonuses({email:a}),h.b.getWithdrawals({email:a})]).subscribe((function(n){var a=(0,e.Z)(n,3),t=a[0],s=a[1],r=a[2],l=null===s||void 0===s?void 0:s.filter((function(n){return"Approved"===n.TransactionStatus&&"Bonus"===n.TransactionType&&"Bonus"===n.PaymentMethodInfo})),d=null===r||void 0===r?void 0:r.filter((function(n){return"Approved"===n.TransactionStatus}));console.log("gaga-------------------------------bonusList------",l),console.log("gaga-------------------------------withdrawalList------",d);var c=Array.from(Array(g()().isoWeeksInYear()).keys()).map((function(n){var a=g()().format("YYYY"),s=g()(a).add(n,"weeks"),i=g()(s).format("MMM"),e=g()(s).format("M"),r=g()(s).startOf("week").add(1,"day").toISOString(),o=g()(s).endOf("week").toISOString(),c=new Date(r),u=new Date(o);c.setUTCHours(0,0,0,0),u.setUTCHours(23,59,59,999);var h=null===t||void 0===t?void 0:t.find((function(n){return n.startDate===c.toISOString()&&n.endDate===u.toISOString()&&n.year===parseInt(a,10)})),m=null===l||void 0===l?void 0:l.find((function(n){var a=g()(n.TransactionDateTime).subtract(7,"days");return a.isAfter(c)&&a.isBefore(u)})),w=null===d||void 0===d?void 0:d.find((function(n){var a=g()(n.TransactionDateTime);return a.isAfter(c)&&a.isBefore(u)})),v=(null===h||void 0===h?void 0:h.betSummary.winnings)||0;return m&&h&&(v=m.Amount+((null===h||void 0===h?void 0:h.betSummary.totalEarnings)||0)),{_id:"".concat(i,"-").concat(n),mon:e+"-"+i,year:a,startDate:c.toISOString(),endDate:u.toISOString(),bonus:(null===m||void 0===m?void 0:m.Amount)||(null===h||void 0===h?void 0:h.betSummary.bonus)||0,totalStaked:(null===h||void 0===h?void 0:h.betSummary.totalStaked)||0,totalEarnings:(null===h||void 0===h?void 0:h.betSummary.totalEarnings)||0,winnings:v,loading:!1,fetch:0,title:i,withdrawal:w}})),u=(0,w.groupBy)(c,"mon"),h=Object.keys(u).map((function(n){return{title:n.split("-")[1],data:u[n]}}));console.log("gaga----------------------------defaultList---------",h);var m=(0,w.sumBy)(h,(function(n){return(0,w.sumBy)(n.data,"winnings")})),v=(0,w.sumBy)(h,(function(n){return(0,w.sumBy)(n.data,"withdrawal.Amount")}));o((function(n){return(0,i.Z)((0,i.Z)({},n),{},{loading:!1,yearTotalWinnings:m,yearTotalWithdrawals:v,list:h})}))}))}),[a]),(0,b.jsx)("div",{className:"user-details-wrap",children:(0,b.jsxs)(d.Z,{inverted:!0,children:[(0,b.jsxs)("div",{className:"ttl",children:[(0,b.jsx)("span",{children:a}),(0,b.jsxs)("div",{className:"row-wrap between",children:[(0,b.jsx)("span",{children:g()().format("YYYY")}),(0,b.jsxs)("div",{className:"winnings-withdrawal-wrap",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"lbl",children:"Earnings"}),(0,b.jsx)("span",{className:x()({winnings:r.yearTotalWinnings>0,losses:r.yearTotalWinnings<0}),children:"".concat((0,p.WI)(r.yearTotalWinnings))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"lbl",children:"Cashout"}),(0,b.jsx)("span",{className:x()({losses:!0}),children:"".concat((0,p.WI)(Math.abs(r.yearTotalWithdrawals||0)))})]})]})]})]}),(0,b.jsx)("hr",{}),(0,b.jsx)("div",{className:"user-details-content-wrap",children:r.list.map((function(n){var a=(0,w.sumBy)(n.data,"winnings");return(0,b.jsxs)("div",{className:"mon-wrap",children:[(0,b.jsxs)("div",{className:"ttl-wrap",children:[(0,b.jsx)(c.Z,{as:"h3",inverted:!0,children:n.title}),(0,b.jsx)(c.Z,{className:x()({winnings:a>0,losses:a<0}),as:"h4",inverted:!0,children:(0,p.WI)(a)})]}),(0,b.jsx)("hr",{}),(0,b.jsx)("div",{className:"week-wrap",children:n.data.map((function(n){return(0,b.jsxs)("div",{className:"week",children:[!!n.withdrawal&&(0,b.jsxs)(u.Z,{on:"click",position:"top center",trigger:(0,b.jsx)("div",{className:"has-withdrawal"}),children:[(0,b.jsx)(u.Z.Header,{children:"Withdrawal"}),(0,b.jsx)(u.Z.Content,{children:"".concat(n.withdrawal.PaymentMethodInfo," ").concat((0,p.WI)(n.withdrawal.Amount))})]}),(0,b.jsx)("div",{className:"week-date",children:(0,b.jsxs)("span",{children:[g()(n.startDate).utc().format("ddd DD")," -"," ",g()(n.endDate).utc().format("ddd DD")]})}),(0,b.jsxs)("div",{className:"week-content",children:[(0,b.jsxs)("div",{className:"row-wrap",children:[(0,b.jsx)("span",{children:"Staked"}),(0,b.jsx)("span",{children:(0,p.WI)(n.totalStaked)})]}),(0,b.jsxs)("div",{className:"row-wrap",children:[(0,b.jsx)("span",{children:"Earnings"}),(0,b.jsx)("span",{children:(0,p.WI)(n.totalEarnings)})]}),(0,b.jsxs)("div",{className:"row-wrap",children:[(0,b.jsx)("span",{children:"Bonus"}),(0,b.jsx)("span",{children:(0,p.WI)(n.bonus)})]}),(0,b.jsxs)("div",{className:"row-wrap",children:[(0,b.jsx)("span",{children:"Winnings"}),(0,b.jsx)("span",{className:x()({winnings:n.winnings>0,losses:n.winnings<0}),children:(0,p.WI)(n.winnings)})]})]})]},n._id)}))})]},n.title)}))}),(0,b.jsx)(m.o,{loading:r.loading})]})})}));s()}catch(W){s(W)}}))},1952:function(n,a,t){t.d(a,{o:function(){return h}});var s=t(1413),i=t(9439),e=t(3144),r=t(5671),o=t(2791),l=t(1487),d=t(2417),c=t(184),u=(0,e.Z)((function n(a){(0,r.Z)(this,n),this.loading=!1,this.content="",this.loading=a.loading,this.content=a.content})),h=function(n){var a=(0,o.useState)(new u(n)),t=(0,i.Z)(a,2),e=t[0],r=t[1];return(0,o.useEffect)((function(){r((function(a){return(0,s.Z)((0,s.Z)({},a),{},{loading:n.loading})}))}),[n.loading]),(0,c.jsx)(l.Z,(0,s.Z)((0,s.Z)({style:{position:"absolute",top:0,left:0,right:0,bottom:0}},e.loading?{active:!0}:{}),{},{children:(0,c.jsx)(d.Z,{})}))}},5630:function(){}}]);
//# sourceMappingURL=615.15df4048.chunk.js.map