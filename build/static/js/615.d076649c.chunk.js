"use strict";(self.webpackChunkplay_ab_web=self.webpackChunkplay_ab_web||[]).push([[615],{1615:function(n,e,i){i.a(n,(async function(n,t){try{i.r(e),i.d(e,{UserDetailsComponent:function(){return C}});var s=i(1413),a=i(9439),r=i(3144),l=i(5671),o=i(2791),d=(i(5630),i(1254)),c=i(1902),u=i(6249),h=i(899),v=i(2836),g=i(4599),m=i(3626),p=i(4863),x=i(6303),f=i(7900),j=i(1952),w=i(763),Z=i(2426),b=i.n(Z),y=i(7689),D=i(3656),S=i(1418),k=i.n(S),I=i(7335),N=i(3338),O=i(184),A=n([f,N]);[f,N]=A.then?(await A)():A;var T=(0,r.Z)((function n(){(0,l.Z)(this,n),this.loading=!0,this.list=[],this.yearTotalWinnings=0,this.yearTotalWithdrawals=0,this.userDetails=void 0,this.settingsOpen=!1})),C=(0,o.memo)((function(){var n,e,i,t,r,l,Z,S=null===(n=(0,y.TH)().pathname.split("/").pop())||void 0===n?void 0:n.replace("@",""),A=(0,o.useState)(new T),C=(0,a.Z)(A,2),W=C[0],B=C[1];(0,o.useEffect)((function(){B((function(n){return(0,s.Z)((0,s.Z)({},n),{},{loading:!0})}));var n=null===S||void 0===S?void 0:S.split(",");(0,I.D)([f.b.getBetSummary({email:{$in:n}}),f.b.getBonuses({email:{$in:n}}),f.b.getWithdrawals({email:{$in:n}}),f.b.getUser({email:{$in:n}})]).subscribe((function(e){var i=(0,a.Z)(e,4),t=i[0],r=i[1],l=i[2],o=i[3],d=null===r||void 0===r?void 0:r.filter((function(n){return"Approved"===n.TransactionStatus&&"Bonus"===n.TransactionType&&["IMMEDIATE BONUS","Bonus"].includes(n.PaymentMethodInfo)&&n.Amount>=10})),c=null===l||void 0===l?void 0:l.filter((function(n){return["Approved","Pending","Sending to Processor","In Process"].includes(n.TransactionStatus)})),u=Array.from(Array(b()().isoWeeksInYear()).keys()).map((function(e){var i=b()().format("YYYY"),s=b()(i).add(e,"weeks"),a=b()(s).format("MMM"),r=b()(s).format("M"),l=b()(s).startOf("week").add(1,"day").toISOString(),o=b()(s).endOf("week").toISOString(),u=new Date(l),h=new Date(o);u.setUTCHours(0,0,0,0),h.setUTCHours(23,59,59,999);var v=null===t||void 0===t?void 0:t.filter((function(n){return n.startDate===u.toISOString()&&n.endDate===h.toISOString()&&n.year===parseInt(i,10)})),g=null===n||void 0===n?void 0:n.map((function(n){return null===d||void 0===d?void 0:d.reverse().find((function(e){var i=b()(e.TransactionDateTime).subtract(7,"days");return i.isAfter(u)&&i.isBefore(h)&&e.email===n}))})).filter(Boolean),m=null===c||void 0===c?void 0:c.find((function(n){var e=new Date(n.TransactionDateTime.split("T")[0]);e.setUTCHours(0,0,0,0);var i=b()(e.toISOString());return i.isSameOrAfter(u)&&i.isSameOrBefore(h)})),p=0,x=(0,w.sumBy)(v,(function(n){return(null===n||void 0===n?void 0:n.betSummary.bonus)||0})),f=(0,w.sumBy)(v,(function(n){return(null===n||void 0===n?void 0:n.betSummary.totalStaked)||0})),j=(0,w.sumBy)(v,(function(n){return(null===n||void 0===n?void 0:n.betSummary.totalEarnings)||0})),Z=(0,w.sumBy)(v,(function(n){return(null===n||void 0===n?void 0:n.betSummary.winnings)||0})),y=(0,w.sumBy)(g,(function(n){return(null===n||void 0===n?void 0:n.Amount)||0}));return(null===g||void 0===g?void 0:g.length)!==(null===n||void 0===n?void 0:n.length)?y=x:Z=0,null!==g&&void 0!==g&&g.length&&null!==v&&void 0!==v&&v.length&&(p=y+(0,w.sumBy)(v,(function(n){return(null===n||void 0===n?void 0:n.betSummary.totalEarnings)||0}))),{_id:"".concat(a,"-").concat(e),mon:r+"-"+a,year:i,startDate:u.toISOString(),endDate:h.toISOString(),bonus:y||x||0,totalStaked:f,totalEarnings:j,winnings:p,approxWinnings:Z,loading:!1,fetch:0,title:a,withdrawal:m}})),h=(0,w.groupBy)(u,"mon"),v=Object.keys(h).map((function(n){return{title:n.split("-")[1],data:h[n]}})),g=(0,w.sumBy)(v,(function(n){return(0,w.sumBy)(n.data,"winnings")})),m=(0,w.sumBy)(v,(function(n){return(0,w.sumBy)(n.data,"withdrawal.Amount")}));B((function(n){return(0,s.Z)((0,s.Z)({},n),{},{loading:!1,yearTotalWinnings:g,yearTotalWithdrawals:m,list:v,userDetails:o})}))}))}),[S]);var M=(0,o.useCallback)((function(){console.log("gaga-------------------------------------",123123),B((function(n){return(0,s.Z)((0,s.Z)({},n),{},{settingsOpen:!W.settingsOpen})}))}),[W.settingsOpen]),P=((null===S||void 0===S?void 0:S.split(","))||[]).length>1;return(0,O.jsx)("div",{className:k()({"user-details-wrap":!0,"multi-users":P}),children:(0,O.jsxs)(d.Z,{children:[(0,O.jsx)(c.Z,{animation:"overlay",onHide:M,visible:W.settingsOpen,width:"wide",children:(0,O.jsx)(N.L,{config:{email:S}})}),(0,O.jsx)(u.Z,{children:(0,O.jsxs)(h.Z,{inverted:!0,children:[(0,O.jsxs)("div",{className:"ttl",children:[P?(0,O.jsx)("span",{children:"Multi Users View"}):(0,O.jsxs)("div",{className:"icon-wrap",children:[(0,O.jsx)(v.Z,{onClick:M,className:"pointer",name:"bars",size:"small"}),(0,O.jsx)("span",{children:S})]}),!P&&(0,O.jsx)("div",{className:"row-wrap between",children:(0,O.jsx)(g.Z,{on:"hover",basic:!0,trigger:(0,O.jsx)(v.Z,{name:"info circle",size:"small",className:"pointer"}),position:"bottom right",mouseLeaveDelay:6e4,children:(0,O.jsxs)(m.Z,{vertical:!0,children:[(0,O.jsx)(m.Z.Item,{header:!0,children:(0,O.jsxs)(p.Z,{as:"h3",children:["Year ",b()().format("YYYY")," Details"]})}),(0,O.jsxs)(m.Z.Item,{children:[(0,O.jsx)(p.Z,{as:"h4",children:"Current Balance"}),(0,O.jsx)("p",{children:(0,O.jsx)(x.Z,{color:"green",children:(0,D.WI)((null===(e=W.userDetails)||void 0===e||null===(i=e[0].data)||void 0===i||null===(t=i.userSession)||void 0===t?void 0:t.cash)||0)})})]}),(0,O.jsxs)(m.Z.Item,{children:[(0,O.jsx)(p.Z,{as:"h4",children:"Available Cashout"}),(0,O.jsx)("p",{children:(0,O.jsx)(x.Z,{color:"orange",children:(0,D.WI)((null===(r=W.userDetails)||void 0===r||null===(l=r[0].data)||void 0===l||null===(Z=l.userSession)||void 0===Z?void 0:Z.cashout)||0)})})]}),(0,O.jsxs)(m.Z.Item,{children:[(0,O.jsx)(p.Z,{as:"h4",children:"Total Earnings this year"}),(0,O.jsx)("p",{children:(0,O.jsx)(x.Z,{color:"purple",children:(0,D.WI)(W.yearTotalWinnings)})})]}),(0,O.jsxs)(m.Z.Item,{children:[(0,O.jsx)(p.Z,{as:"h4",children:"Total Cashout this year"}),(0,O.jsx)("p",{children:(0,O.jsxs)(x.Z,{color:"red",children:[" ",(0,D.WI)(Math.abs(W.yearTotalWithdrawals||0))]})})]})]})})})]}),(0,O.jsx)("hr",{}),(0,O.jsx)("div",{className:"user-details-content-wrap",children:W.list.map((function(n){var e=(0,w.sumBy)(n.data,"winnings");return(0,O.jsxs)("div",{className:"mon-wrap",children:[(0,O.jsxs)("div",{className:"ttl-wrap",children:[(0,O.jsx)(p.Z,{as:"h3",inverted:!0,children:n.title}),(0,O.jsx)(p.Z,{className:k()({winnings:e>0,losses:e<0}),as:"h4",inverted:!0,children:(0,D.WI)(e)})]}),(0,O.jsx)("hr",{}),(0,O.jsx)("div",{className:"week-wrap",children:n.data.map((function(n){return(0,O.jsxs)("div",{className:"week",children:[!!n.withdrawal&&!P&&(0,O.jsx)(O.Fragment,{children:[{Pending:"Pending"===n.withdrawal.TransactionStatus,Approved:"Approved"===n.withdrawal.TransactionStatus,Processing:["In Process","Sending to Processor"].includes(n.withdrawal.TransactionStatus)}].map((function(e,i){var t,s,a;return(0,O.jsxs)(g.Z,{on:"click",position:"top center",trigger:(0,O.jsx)("div",{className:k()({"has-withdrawal":!0,yellow:e.Pending,green:e.Approved,blue:e.Processing})}),flowing:!0,children:[(0,O.jsxs)(g.Z.Header,{children:["Withdrawal (",(0,O.jsx)("span",{className:k()({"yellow-light":e.Pending,"green-light":e.Approved,"blue-light":e.Processing}),children:null===(t=n.withdrawal)||void 0===t?void 0:t.TransactionStatus}),")"]}),(0,O.jsx)(g.Z.Content,{children:"".concat(null===(s=n.withdrawal)||void 0===s?void 0:s.PaymentMethodInfo," ").concat((0,D.WI)((null===(a=n.withdrawal)||void 0===a?void 0:a.Amount)||0))})]},i)}))}),(0,O.jsx)("div",{className:"week-date",children:(0,O.jsxs)("span",{children:[b()(n.startDate).utc().format("ddd DD")," ","- ",b()(n.endDate).utc().format("ddd DD")]})}),(0,O.jsxs)("div",{className:"week-content",children:[(0,O.jsxs)("div",{className:"row-wrap",children:[(0,O.jsx)("span",{children:"Staked"}),(0,O.jsx)("span",{children:(0,D.WI)(n.totalStaked)})]}),(0,O.jsxs)("div",{className:"row-wrap",children:[(0,O.jsx)("span",{children:"Earnings"}),(0,O.jsx)("span",{children:(0,D.WI)(n.totalEarnings)})]}),(0,O.jsxs)("div",{className:"row-wrap",children:[(0,O.jsx)("span",{children:"Bonus"}),(0,O.jsx)("span",{children:(0,D.WI)(n.bonus)})]}),n.approxWinnings>0&&(0,O.jsxs)("div",{className:"row-wrap",children:[(0,O.jsx)("span",{children:"Winnings"}),(0,O.jsx)(g.Z,{content:"Approximate Earnings.",position:"top center",trigger:(0,O.jsx)("span",{className:k()({approx:!0}),children:(0,D.WI)(n.approxWinnings)})})]})||(0,O.jsxs)("div",{className:"row-wrap",children:[(0,O.jsx)("span",{children:"Winnings"}),(0,O.jsx)("span",{className:k()({winnings:n.winnings>0,losses:n.winnings<0}),children:(0,D.WI)(n.winnings)})]})]})]},n._id)}))})]},n.title)}))}),(0,O.jsx)(j.o,{loading:W.loading})]})})]})})}));t()}catch(W){t(W)}}))},3338:function(n,e,i){i.a(n,(async function(n,t){try{i.d(e,{L:function(){return S}});var s=i(1413),a=i(9439),r=i(3144),l=i(5671),o=i(2791),d=i(1418),c=i.n(d),u=i(899),h=i(834),v=i(5345),g=i(4834),m=i(2836),p=i(7900),x=i(5027),f=i(763),j=i(2426),w=i.n(j),Z=i(1952),b=i(184),y=n([p]);p=(y.then?(await y)():y)[0];var D=(0,r.Z)((function n(e){(0,l.Z)(this,n),this.config={isOpen:!1,email:"",password:""},this.loading=!1,this.userDetails={},Object.assign(this.config,e.config)})),S=(0,o.memo)((function(n){var e,i,t,r,l,d,j,y,S,k,I,N,O,A,T=(0,o.useState)(new D(n)),C=(0,a.Z)(T,2),W=C[0],B=C[1];(0,o.useEffect)((function(){B((function(e){return(0,s.Z)((0,s.Z)({},e),{},{config:(0,s.Z)((0,s.Z)({},e.config),n.config)})}))}),[n]);var M=(0,o.useCallback)((function(){console.log("gaga----------------------state.config.email---------------",W.config),B((function(n){return(0,s.Z)((0,s.Z)({},n),{},{loading:!0})})),p.b.$RealmDB.login(W.config.email,W.config.password).pipe((0,x.z)((function(){return console.log("gaga------------------------------------to update",JSON.stringify((0,s.Z)((0,s.Z)({},W.userDetails),{},{_id:W.config.email}),null,2)),p.b.upsertUserData((0,s.Z)((0,s.Z)({},W.userDetails),{},{_id:W.config.email}))}))).subscribe((function(){B((function(n){return(0,s.Z)((0,s.Z)({},n),{},{loading:!1})}))}))}),[W.config]),P=(0,o.useCallback)((function(n){B((function(e){return(0,s.Z)((0,s.Z)({},e),{},{config:(0,s.Z)((0,s.Z)({},e.config),{},{password:n.target.value})})}))}),[]),E=(0,o.useCallback)((function(n,e){n.preventDefault();var i=e["data-value"];Object.keys(i).forEach((function(n){var e=(0,f.get)(W.userDetails,n),t=i[n];"updatedAt"===n&&e?(delete W.userDetails.updatedAt,Object.assign(W.userDetails,(0,f.omit)(W.userDetails,n))):e!==t?(0,f.set)(W.userDetails,n,i[n]):Object.assign(W.userDetails,(0,f.omit)(W.userDetails,n))})),B((function(n){return(0,s.Z)((0,s.Z)({},n),{},{userDetails:W.userDetails})}))}),[W.userDetails]),z=(0,o.useCallback)((function(n,e){n.preventDefault(),n.target.blur()}),[]);return(0,b.jsxs)("div",{className:c()({"settings-wrap":!0,open:W.config.isOpen}),children:[(0,b.jsxs)(u.Z,{inverted:!0,children:[(0,b.jsx)("span",{className:"ttl",children:"Settings"}),(0,b.jsx)("hr",{}),(0,b.jsxs)("div",{className:"content",children:[(0,b.jsxs)("div",{className:"content-item",children:[(0,b.jsx)("span",{children:"For Account"}),(0,b.jsx)("span",{children:W.config.email})]}),(0,b.jsxs)("div",{className:"content-item",children:[(0,b.jsx)("span",{children:"Change Time"}),(0,b.jsx)(h.Z,{inverted:!0,color:"green",size:"small",circular:!0,active:!!W.userDetails.updatedAt,"data-value":{updatedAt:w()().subtract(1,"hour").toDate()},onClick:E,onMouseOut:z,children:"Yes"})]}),(0,b.jsxs)("div",{className:"content-item",children:[(0,b.jsx)("span",{children:"Set Bet"}),(0,b.jsxs)("div",{className:"btn-wrap",children:[(0,b.jsx)(h.Z,{tabIndex:-1,inverted:!0,color:"orange",size:"small",circular:!0,"data-value":{"data.settings.bet":"5"},active:"5"===(null===(e=W.userDetails.data)||void 0===e||null===(i=e.settings)||void 0===i?void 0:i.bet),onClick:E,onMouseOut:z,children:"5"}),(0,b.jsx)(h.Z,{tabIndex:-1,inverted:!0,color:"yellow",size:"small",circular:!0,"data-value":{"data.settings.bet":"15"},active:"15"===(null===(t=W.userDetails.data)||void 0===t||null===(r=t.settings)||void 0===r?void 0:r.bet),onClick:E,onMouseOut:z,children:"15"}),(0,b.jsx)(h.Z,{tabIndex:-1,inverted:!0,color:"green",size:"small",circular:!0,active:"25"===(null===(l=W.userDetails.data)||void 0===l||null===(d=l.settings)||void 0===d?void 0:d.bet),"data-value":{"data.settings.bet":"25"},onClick:E,onMouseOut:z,children:"25"})]})]}),(0,b.jsxs)("div",{className:"content-item",children:[(0,b.jsx)("span",{children:"Set Done"}),(0,b.jsxs)("div",{className:"btn-wrap",children:[(0,b.jsx)(h.Z,{tabIndex:-1,inverted:!0,color:"red",size:"small",circular:!0,"data-value":{"data.weekStatus.done":!1},active:!1===(null===(j=W.userDetails.data)||void 0===j||null===(y=j.weekStatus)||void 0===y?void 0:y.done),onClick:E,onMouseOut:z,children:"false"}),(0,b.jsx)(h.Z,{tabIndex:-1,inverted:!0,color:"green",size:"small",circular:!0,"data-value":{"data.weekStatus.done":!0},active:!0===(null===(S=W.userDetails.data)||void 0===S||null===(k=S.weekStatus)||void 0===k?void 0:k.done),onClick:E,onMouseOut:z,children:"true"})]})]}),(0,b.jsxs)("div",{className:"content-item",children:[(0,b.jsx)("span",{children:"Set Auto Login"}),(0,b.jsxs)("div",{className:"btn-wrap",children:[(0,b.jsx)(h.Z,{tabIndex:-1,inverted:!0,color:"red",size:"small",circular:!0,"data-value":{"data.settings.electronAutoLogin":!1},active:!1===(null===(I=W.userDetails.data)||void 0===I||null===(N=I.settings)||void 0===N?void 0:N.electronAutoLogin),onClick:E,onMouseOut:z,children:"false"}),(0,b.jsx)(h.Z,{tabIndex:-1,inverted:!0,color:"green",size:"small",circular:!0,"data-value":{"data.settings.electronAutoLogin":!0},active:!0===(null===(O=W.userDetails.data)||void 0===O||null===(A=O.settings)||void 0===A?void 0:A.electronAutoLogin),onClick:E,onMouseOut:z,children:"true"})]})]})]}),(0,b.jsx)("hr",{}),(0,b.jsxs)(v.Z,{onSubmit:M,className:"footer",children:[(0,b.jsxs)(g.Z,{iconPosition:"left",placeholder:"Password",children:[(0,b.jsx)(m.Z,{name:"lock"}),(0,b.jsx)("input",{placeholder:"Password",value:W.config.password,onInput:P})]}),(0,b.jsx)(h.Z,{type:"submit",children:"Update"})]})]}),(0,b.jsx)(Z.o,{loading:W.loading})]})}));t()}catch(k){t(k)}}))},1952:function(n,e,i){i.d(e,{o:function(){return h}});var t=i(1413),s=i(9439),a=i(3144),r=i(5671),l=i(2791),o=i(1487),d=i(2417),c=i(184),u=(0,a.Z)((function n(e){(0,r.Z)(this,n),this.loading=!1,this.content="",this.loading=e.loading,this.content=e.content})),h=function(n){var e=(0,l.useState)(new u(n)),i=(0,s.Z)(e,2),a=i[0],r=i[1];return(0,l.useEffect)((function(){r((function(e){return(0,t.Z)((0,t.Z)({},e),{},{loading:n.loading})}))}),[n.loading]),(0,c.jsx)(o.Z,(0,t.Z)((0,t.Z)({style:{position:"absolute",top:0,left:0,right:0,bottom:0}},a.loading?{active:!0}:{}),{},{children:(0,c.jsx)(d.Z,{})}))}},5630:function(){}}]);
//# sourceMappingURL=615.d076649c.chunk.js.map